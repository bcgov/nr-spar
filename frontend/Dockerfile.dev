FROM node:16.19.1-alpine3.17
ENV PORT=3000

# Packages
RUN apk add --no-cache python3 g++ make

# Port and Healthcheck
EXPOSE ${PORT}
HEALTHCHECK --interval=30s --timeout=3s CMD curl -f http://localhost:${PORT}

# Start
WORKDIR /app
CMD ["sh", "-c", "yarn install --frozen-lockfile --prefer-offline && yarn start"]
