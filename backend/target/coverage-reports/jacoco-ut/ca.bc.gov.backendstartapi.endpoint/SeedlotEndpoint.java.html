<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SeedlotEndpoint.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">nr-spar-backend</a> &gt; <a href="index.source.html" class="el_package">ca.bc.gov.backendstartapi.endpoint</a> &gt; <span class="el_source">SeedlotEndpoint.java</span></div><h1>SeedlotEndpoint.java</h1><pre class="source lang-java linenums">package ca.bc.gov.backendstartapi.endpoint;

import ca.bc.gov.backendstartapi.dto.SaveSeedlotFormDtoClassA;
import ca.bc.gov.backendstartapi.dto.SeedPlanZoneDto;
import ca.bc.gov.backendstartapi.dto.SeedlotAclassFormDto;
import ca.bc.gov.backendstartapi.dto.SeedlotApplicationPatchDto;
import ca.bc.gov.backendstartapi.dto.SeedlotCreateDto;
import ca.bc.gov.backendstartapi.dto.SeedlotCreateResponseDto;
import ca.bc.gov.backendstartapi.dto.SeedlotFormSubmissionDto;
import ca.bc.gov.backendstartapi.entity.seedlot.Seedlot;
import ca.bc.gov.backendstartapi.exception.CsvTableParsingException;
import ca.bc.gov.backendstartapi.response.DefaultSpringExceptionResponse;
import ca.bc.gov.backendstartapi.response.ValidationExceptionResponse;
import ca.bc.gov.backendstartapi.service.SaveSeedlotFormService;
import ca.bc.gov.backendstartapi.service.SeedlotService;
import ca.bc.gov.backendstartapi.service.parser.ConeAndPollenCountCsvTableParser;
import ca.bc.gov.backendstartapi.service.parser.SmpCalculationCsvTableParser;
import ca.bc.gov.backendstartapi.vo.parser.ConeAndPollenCount;
import ca.bc.gov.backendstartapi.vo.parser.SmpMixVolume;
import com.fasterxml.jackson.databind.JsonNode;
import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.Parameter;
import io.swagger.v3.oas.annotations.enums.ParameterIn;
import io.swagger.v3.oas.annotations.media.Content;
import io.swagger.v3.oas.annotations.media.Schema;
import io.swagger.v3.oas.annotations.responses.ApiResponse;
import io.swagger.v3.oas.annotations.responses.ApiResponses;
import io.swagger.v3.oas.annotations.tags.Tag;
import jakarta.validation.Valid;
import java.io.IOException;
import java.util.List;
import java.util.Optional;
import lombok.RequiredArgsConstructor;
import org.springframework.core.io.Resource;
import org.springframework.data.domain.Page;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpStatus;
import org.springframework.http.MediaType;
import org.springframework.http.ProblemDetail;
import org.springframework.http.ResponseEntity;
import org.springframework.lang.NonNull;
import org.springframework.util.MimeTypeUtils;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PatchMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.server.ResponseStatusException;

/** This class contains resources for handling {@link Seedlot} operations. */
@RestController
@RequestMapping(path = &quot;/api/seedlots&quot;, produces = MimeTypeUtils.APPLICATION_JSON_VALUE)
<span class="fc" id="L59">@RequiredArgsConstructor</span>
@Tag(
    name = &quot;Seedlots&quot;,
    description = &quot;This class contains resources for handling `Seedlot` operations.&quot;)
public class SeedlotEndpoint {

  private final ConeAndPollenCountCsvTableParser contributionTableCsvParser;

  private final SmpCalculationCsvTableParser smpCalculationTableParser;

  private final SeedlotService seedlotService;

  private final SaveSeedlotFormService saveSeedlotFormService;

  /**
   * Parse the CSV table in {@code file} and return the data stored in it.
   *
   * @param file a CSV file containing the table to be parsed
   * @return a list with the data that has been parsed
   * @throws IOException in case of problems while accessing {@code file}'s content
   */
  @Operation(
      summary = &quot;Upload a file containing a CSV table to be parsed&quot;,
      description =
          &quot;Upload a file with a CSV table and parse it, returning a list of the table's content.&quot;,
      responses = {
        @ApiResponse(
            responseCode = &quot;200&quot;,
            description = &quot;A list with all the values parsed from the CSV table in `file`.&quot;),
        @ApiResponse(
            responseCode = &quot;400&quot;,
            description = &quot;Table doesn't match the format&quot;,
            content = @Content(schema = @Schema(implementation = ProblemDetail.class)))
      })
  @PostMapping(
      path = &quot;/parent-trees-contribution/cone-pollen-count-table/upload&quot;,
      consumes = MediaType.MULTIPART_FORM_DATA_VALUE)
  public ResponseEntity&lt;List&lt;ConeAndPollenCount&gt;&gt; handleConeAndPollenCountTableUpload(
      @RequestParam(&quot;file&quot;)
          @Parameter(description = &quot;The text file to be uploaded. It must contain a CSV table&quot;)
          MultipartFile file)
      throws IOException {
    try {
      // NEXT: validate the information against the seedlot's orchard
      //   All trees on the table must belong to the seedlot's orchard.
<span class="fc" id="L104">      return ResponseEntity.ok(contributionTableCsvParser.parse(getFileResource(file)));</span>
<span class="fc" id="L105">    } catch (CsvTableParsingException e) {</span>
<span class="fc" id="L106">      throw new ResponseStatusException(HttpStatus.BAD_REQUEST, e.getMessage(), e);</span>
    }
  }

  /**
   * Parse CSV table in {@code file} and return the data stored in it.
   *
   * @param file a CSV file containing the table to be parsed
   * @return a list with the data that has been parsed
   * @throws IOException in case of problems while accessing {@code file}'s content
   */
  @Operation(
      summary = &quot;Upload a file containing a CSV table to be parsed&quot;,
      description =
          &quot;Upload a file with a CSV table and parse it, returning a list of the table's content.&quot;,
      responses = {
        @ApiResponse(
            responseCode = &quot;200&quot;,
            description = &quot;A list with all the values parsed from the CSV table in `file`.&quot;),
        @ApiResponse(
            responseCode = &quot;400&quot;,
            description = &quot;Table doesn't match the format&quot;,
            content = @Content(schema = @Schema(implementation = ProblemDetail.class)))
      })
  @PostMapping(
      path = &quot;/parent-trees-contribution/smp-calculation-table/upload&quot;,
      consumes = MediaType.MULTIPART_FORM_DATA_VALUE)
  public ResponseEntity&lt;List&lt;SmpMixVolume&gt;&gt; handleSmpCalculationTableUpload(
      @RequestParam(&quot;file&quot;)
          @Parameter(description = &quot;The text file to be uploaded. It must contain a CSV table&quot;)
          MultipartFile file)
      throws IOException {
    try {
      /*
       * NEXT:
       *   We must have the breeding values of all the trees (even those that don't belong to the
       *   seedlot's orchard).
       */
<span class="fc" id="L144">      return ResponseEntity.ok(smpCalculationTableParser.parse(getFileResource(file)));</span>
<span class="fc" id="L145">    } catch (CsvTableParsingException e) {</span>
<span class="fc" id="L146">      throw new ResponseStatusException(HttpStatus.BAD_REQUEST, e.getMessage(), e);</span>
    }
  }

  private Resource getFileResource(MultipartFile file) {
<span class="fc" id="L151">    var resource = file.getResource();</span>
<span class="fc" id="L152">    var filename = resource.getFilename();</span>
<span class="pc bpc" id="L153" title="1 of 4 branches missed.">    if (filename == null || !filename.substring(filename.lastIndexOf('.')).equals(&quot;.csv&quot;)) {</span>
<span class="fc" id="L154">      throw new CsvTableParsingException(&quot;CSV files only&quot;);</span>
    }
<span class="fc" id="L156">    return resource;</span>
  }

  /**
   * Created a new Seedlot in the system.
   *
   * @param createDto A {@link SeedlotCreateDto} containig all required field to get a new
   *     registration started.
   * @return A {@link SeedlotCreateResponseDto} with all created values.
   */
  @PostMapping(consumes = MimeTypeUtils.APPLICATION_JSON_VALUE)
  @Operation(
      summary = &quot;Creates a Seedlot&quot;,
      description = &quot;&quot;&quot;
          Creates a Seedlot with minimum required fields.
          &quot;&quot;&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(
            responseCode = &quot;201&quot;,
            description = &quot;The Seedlot entity was successfully created&quot;),
        @ApiResponse(
            responseCode = &quot;400&quot;,
            description = &quot;One or more fields has invalid values.&quot;,
            content =
                @Content(
                    mediaType = &quot;application/json&quot;,
                    schema =
                        @Schema(
                            oneOf = {
                              ValidationExceptionResponse.class,
                              DefaultSpringExceptionResponse.class
                            }))),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public ResponseEntity&lt;SeedlotCreateResponseDto&gt; createSeedlot(
      @io.swagger.v3.oas.annotations.parameters.RequestBody(
              description = &quot;Body containing minimum required fields to create a seedlot&quot;,
              required = true)
          @RequestBody
          @Valid
          SeedlotCreateDto createDto) {
<span class="fc" id="L201">    SeedlotCreateResponseDto response = seedlotService.createSeedlot(createDto);</span>
<span class="fc" id="L202">    return ResponseEntity.status(HttpStatus.CREATED).body(response);</span>
  }

  /**
   * Resource to fetch all seedlots to a given user id.
   *
   * @param userId user identification to fetch seedlots to
   * @return A {@link List} of {@link Seedlot} populated or empty
   */
  @GetMapping(&quot;/users/{userId}&quot;)
  @CrossOrigin(exposedHeaders = &quot;X-TOTAL-COUNT&quot;)
  @Operation(
      summary = &quot;Fetch all seedlots registered by a given user.&quot;,
      description = &quot;Returns a paginated list containing the seedlots&quot;,
      responses = {
        @ApiResponse(
            responseCode = &quot;200&quot;,
            description = &quot;A list containing found Seedlots or an empty list&quot;),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public ResponseEntity&lt;List&lt;Seedlot&gt;&gt; getUserSeedlots(
      @PathVariable
          @Parameter(
              name = &quot;userId&quot;,
              in = ParameterIn.PATH,
              description = &quot;User's identification&quot;,
              example = &quot;dev-abcdef123456@idir&quot;)
          String userId,
      @RequestParam(value = &quot;page&quot;, required = false, defaultValue = &quot;0&quot;) int page,
      @RequestParam(value = &quot;size&quot;, required = false, defaultValue = &quot;10&quot;) int size) {
<span class="fc" id="L235">    Optional&lt;Page&lt;Seedlot&gt;&gt; optionalResult = seedlotService.getUserSeedlots(userId, page, size);</span>
<span class="fc bfc" id="L236" title="All 2 branches covered.">    List&lt;Seedlot&gt; result = optionalResult.isEmpty() ? List.of() : optionalResult.get().getContent();</span>
    String totalCount =
<span class="fc bfc" id="L238" title="All 2 branches covered.">        optionalResult.isEmpty() ? &quot;0&quot; : String.valueOf(optionalResult.get().getTotalElements());</span>
<span class="fc" id="L239">    HttpHeaders responseHeaders = new HttpHeaders();</span>
<span class="fc" id="L240">    responseHeaders.set(&quot;X-TOTAL-COUNT&quot;, totalCount);</span>
<span class="fc" id="L241">    return ResponseEntity.ok().headers(responseHeaders).body(result);</span>
  }

  /**
   * Get information from a single seedlot.
   *
   * @param seedlotNumber the seedlot number to fetch the info for
   * @return A {@link Seedlot} with all the current information for the seedlot.
   */
  @GetMapping(&quot;/{seedlotNumber}&quot;)
  @Operation(
      summary = &quot;Fetch a single seedlot information&quot;,
      description =
          &quot;&quot;&quot;
          Fetch all current information from a single seedlot, identified by it's number
          &quot;&quot;&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;The Seedlot info was correctly found&quot;),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class))),
        @ApiResponse(
            responseCode = &quot;404&quot;,
            description = &quot;Could not find information for the given seedlot number&quot;)
      })
  public Seedlot getSingleSeedlotInfo(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot ID&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          String seedlotNumber) {
<span class="fc" id="L277">    return seedlotService.getSingleSeedlotInfo(seedlotNumber);</span>
  }

  /**
   * Get full information from a single seedlot, including parent trees and
   * calculation results, divided by registration steps.
   *
   * @param seedlotNumber the seedlot number to fetch the info for
   * @return A {@link SeedlotAclassFormDto} with all the current information for
   *         the seedlot and parent tree data.
   */
  @GetMapping(&quot;/{seedlotNumber}/a-class-full-form&quot;)
  @Operation(
      summary =
          &quot;&quot;&quot;
          Fetch single seedlot information, with all respective form fields,
          including parent tree data and calculation results
          &quot;&quot;&quot;,
      description =
          &quot;&quot;&quot;
          Fetch all current information from a single seedlot and respective
          parent tree data, identified by it's number
          &quot;&quot;&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;The Seedlot info was correctly found&quot;),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class))),
        @ApiResponse(
            responseCode = &quot;404&quot;,
            description = &quot;Could not find information for the given seedlot number&quot;)
      })
  public SeedlotAclassFormDto getFullSeedlotInfo(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot ID&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          String seedlotNumber) {
<span class="fc" id="L320">    return seedlotService.getAclassSeedlotFormInfo(seedlotNumber);</span>
  }


  /**
   * PATCH an entry on the Seedlot table.
   *
   * @param patchDto A {@link SeedlotApplicationPatchDto} containig all required field to get a new
   *     registration started.
   * @return A {@link Seedlot} with all updated values.
   */
  @PatchMapping(
      consumes = MimeTypeUtils.APPLICATION_JSON_VALUE,
      path = &quot;/{seedlotNumber}/application-info&quot;)
  @Operation(
      summary = &quot;Updates a seedlot's applicant email and other fields&quot;,
      description =
          &quot;&quot;&quot;
          Updates a seedlot's applicant email, source_code, to_be_registered_ind and bc_source_ind
          &quot;&quot;&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(
            responseCode = &quot;200&quot;,
            description = &quot;The Seedlot entity was successfully updated&quot;),
        @ApiResponse(
            responseCode = &quot;400&quot;,
            description = &quot;One or more fields has invalid values.&quot;,
            content =
                @Content(
                    mediaType = &quot;application/json&quot;,
                    schema =
                        @Schema(
                            oneOf = {
                              ValidationExceptionResponse.class,
                              DefaultSpringExceptionResponse.class
                            }))),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public Seedlot patchApplicantAndSeedlotInfo(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot ID&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          String seedlotNumber,
      @io.swagger.v3.oas.annotations.parameters.RequestBody(
              description = &quot;Body containing minimum required fields to create a seedlot&quot;,
              required = true)
          @RequestBody
          @Valid
          SeedlotApplicationPatchDto patchDto) {

<span class="fc" id="L378">    return seedlotService.patchApplicantionInfo(seedlotNumber, patchDto);</span>
  }

  /**
   * Saves the Seedlot submit form once submitted on step 6.
   *
   * @param form A {@link SeedlotFormSubmissionDto} containing all the form information
   * @return A {@link SeedlotCreateResponseDto} containing the seedlot number and status
   */
  @PutMapping(&quot;/{seedlotNumber}/a-class-form-submission&quot;)
  @Operation(
      summary = &quot;Saves the Seedlot form when submitted or edited&quot;,
      description =
          &quot;This API is responsible for receiving the entire seedlot form, once submitted or&quot;
              + &quot; edited.&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(responseCode = &quot;201&quot;, description = &quot;Successfully saved.&quot;),
        @ApiResponse(
            responseCode = &quot;400&quot;,
            description = &quot;One or more fields has invalid values.&quot;,
            content =
                @Content(
                    mediaType = &quot;application/json&quot;,
                    schema =
                        @Schema(
                            oneOf = {
                              ValidationExceptionResponse.class,
                              DefaultSpringExceptionResponse.class
                            }))),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public ResponseEntity&lt;SeedlotCreateResponseDto&gt; submitSeedlotForm(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot ID&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          String seedlotNumber,
      @RequestBody SeedlotFormSubmissionDto form) {
<span class="fc" id="L423">    SeedlotCreateResponseDto createDto = seedlotService.submitSeedlotForm(seedlotNumber, form);</span>
<span class="fc" id="L424">    return ResponseEntity.status(HttpStatus.CREATED).body(createDto);</span>
  }

  /**
   * Saves the Seedlot reg form progress.
   *
   * @param data A {@link SaveSeedlotFormDtoClassA} containing all the form information
   * @return 204 on success.
   */
  @PutMapping(&quot;{seedlotNumber}/a-class-form-progress&quot;)
  @Operation(
      summary = &quot;Save the progress of an a-class reg form.&quot;,
      description =
          &quot;This endpoint saves the progress of an A-class registration form, it is NOT to be used&quot;
              + &quot; for form submission.&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(responseCode = &quot;204&quot;, description = &quot;Successfully saved or updated.&quot;),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public ResponseEntity&lt;Void&gt; saveFormProgressClassA(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot Number&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          @NonNull
          String seedlotNumber,
      @RequestBody SaveSeedlotFormDtoClassA data) {

<span class="fc" id="L459">    saveSeedlotFormService.saveFormClassA(seedlotNumber, data);</span>

<span class="fc" id="L461">    return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);</span>
  }

  /** Retrieves the saved Seedlot reg form. */
  @GetMapping(&quot;{seedlotNumber}/a-class-form-progress&quot;)
  @Operation(
      summary = &quot;Retrieve the progress and data of an a-class reg form.&quot;,
      description = &quot;This endpoint retrieves the progress of an A-class registration form&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Successfully retrieved.&quot;),
        @ApiResponse(
            responseCode = &quot;404&quot;,
            description = &quot;Seedlot form progress not found&quot;,
            content = @Content(schema = @Schema(implementation = Void.class))),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public SaveSeedlotFormDtoClassA getFormProgressClassA(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot Number&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          @NonNull
          String seedlotNumber) {

<span class="fc" id="L492">    return saveSeedlotFormService.getFormClassA(seedlotNumber);</span>
  }

  /** Retreive only the progress_status column from the form progress table. */
  @GetMapping(&quot;{seedlotNumber}/a-class-form-progress/status&quot;)
  @Operation(
      summary = &quot;Retrieve the progress status of an a-class reg form.&quot;,
      description =
          &quot;This endpoint retrieves the progress status only of an A-class registration form&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Successfully retrieved.&quot;),
        @ApiResponse(
            responseCode = &quot;404&quot;,
            description = &quot;Seedlot form progress not found&quot;,
            content = @Content(schema = @Schema(implementation = Void.class))),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public JsonNode getFormProgressStatusClassA(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot Number&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          String seedlotNumber) {

<span class="fc" id="L523">    return saveSeedlotFormService.getFormStatusClassA(seedlotNumber);</span>
  }

  /**
   * Get all the seed plan zone information given a seedlot number.
   *
   * @param seedlotNumber the Seedlot id
   * @return A list of {@link SeedPlanZoneDto} containing all records.
   */
  @GetMapping(&quot;/{seedlotNumber}/seed-plan-zone-data&quot;)
  @Operation(
      summary = &quot;Get SPZ (Seed Plan Zone) data given a seedlot number.&quot;,
      description = &quot;Fetches all the seed plan zone information to a particular seedlot number&quot;)
  @ApiResponses(
      value = {
        @ApiResponse(
            responseCode = &quot;200&quot;,
            description =
                &quot;A list of `SeedPlanZoneDto` containing all the SPZ information if found.&quot;),
        @ApiResponse(
            responseCode = &quot;404&quot;,
            description = &quot;If no seedlot record found, or if no Orchard Seedlot record found.&quot;,
            content = @Content(schema = @Schema(implementation = Void.class))),
        @ApiResponse(
            responseCode = &quot;401&quot;,
            description = &quot;Access token is missing or invalid&quot;,
            content = @Content(schema = @Schema(implementation = Void.class)))
      })
  public List&lt;SeedPlanZoneDto&gt; getSeedPlanZoneData(
      @Parameter(
              name = &quot;seedlotNumber&quot;,
              in = ParameterIn.PATH,
              description = &quot;Seedlot number&quot;,
              required = true,
              schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;))
          @PathVariable
          @NonNull
          String seedlotNumber) {
<span class="fc" id="L561">    return seedlotService.getSeedPlanZoneData(seedlotNumber);</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>